---
title: "Anomaly detection with data driven approaches"
author: "Nathen Byford"
format: 
  baylor_theme-revealjs:
    footer: "Nathen Byford"
---

```{r}
#| include: false

library("tidyverse"); theme_set(theme_minimal())

data <- read_csv("data/combined_data.csv")
```

## Road map

1. Project Motivation
2. Data
3. Methods
4. Results
5. Discussion

# Project Review

## Project motivation

- Anomalies in data are a common problem in 

## Data

```{r}
data |> ggplot(aes(x = timestamp, y = value)) +
  geom_line(aes(color = company), alpha = .6) +
  geom_point(data = filter(data, anomaly), shape = 4) +
  facet_wrap(vars(company), scales = "free_y") +
  scale_color_viridis_d(option = "H") +
  labs(title = "Time plot of Twitter tags with anomalies",
       x = "Time", y = "Twitter tags") +
  theme(legend.position = "none")
```


# Methods

## Methods 

- Linear regression (leverage points)
- Seasonal decomposition of time series by Loess (STL)
- Stochastic gradient descent (Neural Network)
- Isolation Trees

## Linear regression

## STL

## Neural Network

## Isolation Trees

## Results {.smaller}

:::{.tab}
table: AUC for models

|name                     |   AAPL|   AMZN|    CRM|    CVS|     FB|   GOOG|    IBM|     KO|    PFE|    UPS|
|:------------------------|------:|------:|------:|------:|------:|------:|------:|------:|------:|------:|
|lm                       | 0.9962| 0.9888| 0.9814| 0.9899| 0.9945| 0.4851| 0.9899| 0.9968| 0.9790| 0.4939|
|stl                      | 0.9554| 0.9920| 0.9892| 0.8667| 0.9868| 0.4839| 0.9869| 0.9843| 0.9869| 0.4817|
|SGD                      | 0.9994| 0.5000| 0.5000| 0.7499| 0.9999| 0.5000| 0.5000| 0.7500| 0.5000| 0.5000|
|Isolation Forest         | 0.9967| 0.5000| 0.5000| 0.7497| 0.5000| 0.4999| 0.5000| 0.9991| 0.5000| 0.4981|
|Density Isolation Forest | 0.9665| 0.9859| 0.9713| 0.9611| 0.9905| 0.9736| 0.9746| 0.9912| 0.9758| 0.4888|
|Fair-Cut Forest          | 0.5000| 0.5000| 0.5000| 0.5000| 0.5000| 0.5000| 0.5000| 0.5000| 0.5000| 0.5000|
:::

## Results cont. {.smaller}

- Another critical measure in this case is true positive rate
- Since there are so few anomalies in the data.

:::{.tab}
table: True positive rate

|name                     | AAPL| AMZN| CRM| CVS| FB| GOOG| IBM|  KO| PFE| UPS|
|:------------------------|----:|----:|---:|---:|--:|----:|---:|---:|---:|---:|
|lm                       |    1|    1|   1| 1.0|  1|    0|   1| 1.0|   1|   0|
|stl                      |    1|    1|   1| 1.0|  1|    0|   1| 1.0|   1|   0|
|SGD                      |    1|    0|   0| 0.5|  1|    0|   0| 0.5|   0|   0|
|Isolation Forest         |    1|    0|   0| 0.5|  0|    0|   0| 1.0|   0|   0|
|Density Isolation Forest |    1|    1|   1| 1.0|  1|    1|   1| 1.0|   1|   0|
|Fair-Cut Forest          |    0|    0|   0| 0.0|  0|    0|   0| 0.0|   0|   0|
:::


# Discussion

## Conclusion


# Thank you!